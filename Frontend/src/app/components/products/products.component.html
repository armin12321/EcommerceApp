<div class="row">
    <div class="col-12 text-center">
        <a [routerLink]="['/products/add']"><button type="button" class="btn btn-primary">Add product</button></a>
    </div>    
</div>
<div class="row">
    <div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col"> </th>
                <th scope="col">Product</th>
                <th scope="col">Quantity</th>                            
                <th scope="col">Published</th>
                <th scope="col" class="text-right">Price</th>
                <th> </th>
                <th> </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let product of products; let i = index;">
                <td><img [src]="this.pictures[i]" style="height: 50px; width: 50px; border-radius: 10%;"/> </td>
                <td> {{ product.name }} </td>                            
                <td> {{ product.available }} </td>
                <td> {{ agos[i] }} </td>
                <td class="text-right"> {{ product.price }} KM</td>
                <td class="text-right"><button (click)="goToUpdateProduct(i)" class="btn btn-sm btn-warning">update</button></td>
                <td class="text-right"><button (click)="setTempIndex(i, template)" class="btn btn-sm btn-danger"><i class="fa fa-trash"></i> </button> </td>
            </tr>                                
        </tbody>
    </table>
</div>
</div>

<div class="row">
    <div class="col-12 text-center">
        <h5>*Note: when updating product's info, published time is automatically renewed</h5>
    </div>
</div>

<ng-template #template>
    <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Delete product?</h5>
          <button type="button" class="btn btn-danger" data-dismiss="modal" aria-label="Close" (click)='modalRef.hide()'>
            x
          </button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete this product?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)='deleteProduct(tempIndex)'>Yes, I'm sure</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)='modalRef.hide()'>Close</button>
        </div>
    </div>        
</ng-template>